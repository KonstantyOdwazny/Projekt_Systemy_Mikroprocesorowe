\hypertarget{regulator_8c_source}{}\doxysection{regulator.\+c}
\label{regulator_8c_source}\index{Core/Src/regulator.c@{Core/Src/regulator.c}}
\mbox{\hyperlink{regulator_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00001}00001 \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00002}00002 \textcolor{comment}{ * regulator.c}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00003}00003 \textcolor{comment}{ *}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00004}00004 \textcolor{comment}{ *  Created on: Jan 15, 2022}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00005}00005 \textcolor{comment}{ *      Author: Konstanty}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00006}00006 \textcolor{comment}{ */}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00007}00007 \textcolor{preprocessor}{\#include "{}regulator.h"{}}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00009}\mbox{\hyperlink{regulator_8c_aaf64d09e1fccc87f314a4cb76625d310}{00009}} \textcolor{keywordtype}{float} \mbox{\hyperlink{regulator_8c_aaf64d09e1fccc87f314a4cb76625d310}{Reg\_SignalControl}}(regulator\_Handle\_TypeDef* Reg,\textcolor{keywordtype}{float} y\_ref, \textcolor{keywordtype}{float} pomiar)}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00010}00010 \{}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00011}00011     \textcolor{keywordtype}{float} e;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00012}00012     \textcolor{keywordtype}{float} u;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00013}00013     \textcolor{keywordtype}{float} u\_sat;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00014}00014     \textcolor{keywordtype}{float} N=0.01f;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00015}00015     e = y\_ref -\/ pomiar;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00016}00016             Reg-\/>e\_int += Reg-\/>Ki*Reg-\/>Ts*e;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00017}00017             Reg-\/>e\_der = (Reg-\/>Kd*N)*(e-\/Reg-\/>e\_prev) + (1.0f -\/ N*Reg-\/>Ts)*Reg-\/>e\_der;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00018}00018             Reg-\/>e\_prev = e;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00019}00019 }
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00020}00020             u = Reg-\/>e\_int + Reg-\/>e\_der + (Reg-\/>Kp*e);}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00022}00022             \textcolor{keywordflow}{if}(u > Reg-\/>limitup)}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00023}00023             \{}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00024}00024               u\_sat = Reg-\/>limitup;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00025}00025             \}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00026}00026             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(u < Reg-\/>limitdown)}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00027}00027             \{}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00028}00028               u\_sat = Reg-\/>limitdown;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00029}00029             \}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00030}00030             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00031}00031             \{}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00032}00032               u\_sat = u;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00033}00033             \}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00035}00035             \textcolor{keywordflow}{if}(u!=u\_sat)}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00036}00036             \{}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00037}00037               Reg-\/>e\_int -\/=Reg-\/>Ki*Reg-\/>Ts*e;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00038}00038             \}}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00039}00039     \textcolor{keywordflow}{return} u\_sat;}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00040}00040 \};}
\DoxyCodeLine{\Hypertarget{regulator_8c_source_l00041}00041 }

\end{DoxyCode}
